<!doctype html>
<html lang="pt">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contacte-nos - Red Bull Racing</title>
    <link rel="stylesheet" href="assets/styles/globals.css">
    <link rel="stylesheet" href="assets/styles/contacto.css">
    <link rel="icon" href="./assets/images/favicon.png">
    <script src="./components/Header.js" defer></script>
    <script src="./components/Footer.js" defer></script>
  </head>
  <body class="container">
    <rb-header></rb-header>

    <main class="contact-form">
      <div class="contact-container">
        <div class="contact-header">
          <h1>CONTACTE-NOS</h1>
        </div>
        <form class="form">
          <div class="forms">
            <label for="name">Nome</label>
            <input
              id="name"
              class="form-name"
              type="text"
              placeholder="O seu nome"
              required
            >
          </div>
          <div class="forms">
            <label for="email">Email</label>
            <input
              id="email"
              class="form-email"
              type="email"
              placeholder="nome@email.com"
              required
            >
          </div>
          <div class="forms">
            <label for="message">Mensagem</label>
            <textarea
              id="message"
              class="form-mensagem"
              rows="3"
              placeholder="Escreva a sua mensagem..."
              required
            ></textarea>
          </div>
          <button type="submit" class="submit-button">
            <span>Enviar a Mensagem</span>
          </button>
        </form>
      </div>
    </main>

    <rb-footer></rb-footer>
    <script>
      document.querySelector(".form").addEventListener("submit", function (e) {
        e.preventDefault();

        const name = document.getElementById("name").value;
        const email = document.getElementById("email").value;
        const message = document.getElementById("message").value;

        const webhookUrl =
          "https://canary.discord.com/" +
          "api/webhooks/" +
          "1445351920700100719/678xaDzKg5ITLwK0PBge1jEQIZr56KJAnglXgs3XaPTCxaIPYZjDMLIjs9ZzlRb5fh-q";

        const payload = {
          content: "New Contact Form Submission",
          embeds: [
            {
              title: "Contact Details",
              color: 16711680,
              fields: [
                { name: "Nome", value: name, inline: true },
                { name: "Email", value: email, inline: true },
                { name: "Mensagem", value: message },
              ],
              timestamp: new Date().toISOString(),
            },
          ],
        };

        fetch(webhookUrl, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(payload),
        })
          .then((response) => {
            if (response.ok) {
              alert("Mensagem enviada com sucesso!");
              document.querySelector(".form").reset();
            } else {
              alert("Erro ao enviar mensagem. Tente novamente.");
            }
          })
          .catch((error) => {
            console.error("Error:", error);
            alert("Erro ao enviar mensagem.");
          });
      });
    </script>
  </body>
</html>
